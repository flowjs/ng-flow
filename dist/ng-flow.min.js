/*! @flowjs/ng-flow 2.7.7 */
!function(a,b){"function"==typeof define&&define.amd?define(["angular","@flowjs/flow.js"],b):"object"==typeof exports?module.exports=b(require("angular"),require("@flowjs/flow.js")):a.ngFlow=b(a.angular,a.Flow)}(this,function(a,b){return a.module("flow.provider",[]).provider("flowFactory",function(){"use strict";this.defaults={},this.factory=function(a){return new b(a)},this.events=[],this.on=function(a,b){this.events.push([a,b])},this.$get=function(){var b=this.factory,c=this.defaults,d=this.events;return{create:function(e){var f=b(a.extend({},c,e));return a.forEach(d,function(a){f.on(a[0],a[1])}),f}}}}),a.module("flow.init",["flow.provider"]).controller("flowCtrl",["$scope","$attrs","$parse","flowFactory",function(b,c,d,e){var f=a.extend({},b.$eval(c.flowInit)),g=b.$eval(c.flowObject)||e.create(f),h=function(a){var c=Array.prototype.slice.call(arguments);c.shift();var d=b.$broadcast.apply(b,["flow::"+a,g].concat(c));if({progress:1,filesSubmitted:1,fileSuccess:1,fileError:1,complete:1}[a]&&b.$apply(),d.defaultPrevented)return!1};g.on("catchAll",h),b.$on("$destroy",function(){g.off("catchAll",h)}),b.$flow=g,c.hasOwnProperty("flowName")&&(d(c.flowName).assign(b,g),b.$on("$destroy",function(){d(c.flowName).assign(b)}))}]).directive("flowInit",[function(){return{scope:!0,controller:"flowCtrl"}}]),a.module("flow.btn",["flow.init"]).directive("flowBtn",[function(){return{restrict:"EA",scope:!1,require:"^flowInit",link:function(a,b,c){var d=c.hasOwnProperty("flowDirectory"),e=c.hasOwnProperty("flowSingleFile"),f=c.hasOwnProperty("flowAttrs")&&a.$eval(c.flowAttrs);a.$flow.assignBrowse(b,d,e,f)}}}]),a.module("flow.dragEvents",["flow.init"]).directive("flowPreventDrop",function(){return{scope:!1,link:function(a,b,c){b.bind("drop dragover",function(a){a.preventDefault()})}}}).directive("flowDragEnter",["$timeout",function(b){return{scope:!1,link:function(c,d,e){function f(b){var c=!1,d=b.dataTransfer||b.originalEvent.dataTransfer;return a.forEach(d&&d.types,function(a){"Files"===a&&(c=!0)}),c}var g,h=!1;d.bind("dragover",function(a){f(a)&&(h||(c.$apply(e.flowDragEnter),h=!0),b.cancel(g),a.preventDefault())}),d.bind("dragleave drop",function(a){b.cancel(g),g=b(function(){c.$eval(e.flowDragLeave),g=null,h=!1},100)})}}}]),a.module("flow.drop",["flow.init"]).directive("flowDrop",function(){return{scope:!1,require:"^flowInit",link:function(a,b,c){function d(){a.$flow.assignDrop(b)}function e(){a.$flow.unAssignDrop(b)}c.flowDropEnabled?a.$watch(c.flowDropEnabled,function(a){a?d():e()}):d()}}}),!function(a){"use strict";function b(a){return a.charAt(0).toUpperCase()+a.slice(1)}var c=a.module("flow.events",["flow.init"]),d={fileSuccess:["$file","$message"],fileProgress:["$file"],fileAdded:["$file","$event"],filesAdded:["$files","$event"],filesSubmitted:["$files","$event"],fileRetry:["$file"],fileRemoved:["$file"],fileError:["$file","$message"],uploadStart:[],complete:[],progress:[],error:["$message","$file"]};a.forEach(d,function(d,e){var f="flow"+b(e);"flowUploadStart"==f&&(f="flowUploadStarted"),c.directive(f,[function(){return{require:"^flowInit",controller:["$scope","$attrs",function(b,c){b.$on("flow::"+e,function(){var e=Array.prototype.slice.call(arguments),g=e.shift();if(b.$flow===e.shift()){var h={};a.forEach(d,function(a,b){h[a]=e[b]}),b.$eval(c[f],h)===!1&&g.preventDefault()}})}]}}])})}(a),a.module("flow.img",["flow.init"]).directive("flowImg",[function(){return{scope:!1,require:"^flowInit",link:function(a,b,c){var d=c.flowImg;a.$watch(d,function(b){if(b){var d=new FileReader;d.readAsDataURL(b.file),d.onload=function(b){a.$apply(function(){c.$set("src",b.target.result)})}}})}}}]),a.module("flow.transfers",["flow.init"]).directive("flowTransfers",[function(){return{scope:!0,require:"^flowInit",link:function(a){a.transfers=a.$flow.files}}}]),a.module("flow",["flow.provider","flow.init","flow.events","flow.btn","flow.drop","flow.transfers","flow.img","flow.dragEvents"]),"flow"});